---
title: Gradient Utilities
description: Parse and interpolate CSS gradients
---

# Gradient Utilities

Remotion Bits provides utilities for parsing, manipulating, and interpolating CSS gradients, powering the BackgroundTransition component.

## Import

```tsx
import {
  parseGradient,
  interpolateGradient,
  gradientToString
} from 'remotion-bits';
```

## Gradient Types

Supported gradient types:
- `linear-gradient()`
- `radial-gradient()`
- `conic-gradient()`

## Functions

### `parseGradient`

Parse a CSS gradient string into its components.

```tsx
parseGradient(gradient: string): {
  type: 'linear' | 'radial' | 'conic';
  angle?: number;           // For linear gradients (degrees)
  shape?: 'circle' | 'ellipse'; // For radial gradients
  position?: string;        // For radial gradients
  from?: number;           // For conic gradients (degrees)
  stops: Array<{
    color: string;
    position: number;      // 0-100
  }>;
}
```

**Example:**

```tsx
const gradient = parseGradient('linear-gradient(45deg, #ff0000 0%, #0000ff 100%)');
// {
//   type: 'linear',
//   angle: 45,
//   stops: [
//     { color: '#ff0000', position: 0 },
//     { color: '#0000ff', position: 100 }
//   ]
// }

const radial = parseGradient('radial-gradient(circle, red, blue)');
// {
//   type: 'radial',
//   shape: 'circle',
//   stops: [
//     { color: 'red', position: 0 },
//     { color: 'blue', position: 100 }
//   ]
// }
```

### `interpolateGradient`

Interpolate between two gradients.

```tsx
interpolateGradient(
  gradient1: string,
  gradient2: string,
  progress: number
): string
```

**Features:**
- Interpolates colors in OKLch space
- Smoothly transitions angles (shortest path)
- Morphs between gradient types
- Aligns color stops automatically

**Example:**

```tsx
const gradient = interpolateGradient(
  'linear-gradient(0deg, #ff0000, #00ff00)',
  'linear-gradient(180deg, #0000ff, #ffff00)',
  0.5
);
// Returns a gradient halfway between the two
```

### `gradientToString`

Convert parsed gradient components back to a CSS string.

```tsx
gradientToString(gradient: ParsedGradient): string
```

**Example:**

```tsx
const parsed = parseGradient('linear-gradient(45deg, red, blue)');
const cssString = gradientToString(parsed);
// "linear-gradient(45deg, rgb(255, 0, 0) 0%, rgb(0, 0, 255) 100%)"
```

## Usage Examples

### Basic Gradient Interpolation

```tsx
import { useCurrentFrame } from 'remotion';
import { interpolateGradient } from 'remotion-bits';

export const GradientAnimation = () => {
  const frame = useCurrentFrame();
  const progress = Math.min(frame / 60, 1);

  const gradient = interpolateGradient(
    'linear-gradient(0deg, #667eea, #764ba2)',
    'linear-gradient(180deg, #f093fb, #f5576c)',
    progress
  );

  return (
    <div style={{
      background: gradient,
      width: '100%',
      height: '100%'
    }}>
      Content
    </div>
  );
};
```

### Gradient Rotation

```tsx
const rotateGradient = (gradient: string, rotation: number): string => {
  const parsed = parseGradient(gradient);

  if (parsed.type === 'linear' && parsed.angle !== undefined) {
    parsed.angle = (parsed.angle + rotation) % 360;
  } else if (parsed.type === 'conic' && parsed.from !== undefined) {
    parsed.from = (parsed.from + rotation) % 360;
  }

  return gradientToString(parsed);
};

// Rotate a gradient by 45 degrees
const rotated = rotateGradient(
  'linear-gradient(0deg, red, blue)',
  45
);
```

### Multi-Stop Gradient Creation

```tsx
const createMultiStopGradient = (
  colors: string[],
  angle: number = 90
): string => {
  const stops = colors.map((color, i) => {
    const position = (100 / (colors.length - 1)) * i;
    return `${color} ${position}%`;
  }).join(', ');

  return `linear-gradient(${angle}deg, ${stops})`;
};

const gradient = createMultiStopGradient(
  ['#667eea', '#764ba2', '#f093fb', '#f5576c'],
  45
);
// "linear-gradient(45deg, #667eea 0%, #764ba2 33.33%, #f093fb 66.67%, #f5576c 100%)"
```

### Gradient Color Extraction

```tsx
const extractColors = (gradient: string): string[] => {
  const parsed = parseGradient(gradient);
  return parsed.stops.map(stop => stop.color);
};

const colors = extractColors('linear-gradient(red, blue, green)');
// ['red', 'blue', 'green']
```

### Reverse Gradient

```tsx
const reverseGradient = (gradient: string): string => {
  const parsed = parseGradient(gradient);

  // Reverse the stops
  parsed.stops = parsed.stops.map(stop => ({
    color: stop.color,
    position: 100 - stop.position
  })).reverse();

  // Reverse angle for linear gradients
  if (parsed.type === 'linear' && parsed.angle !== undefined) {
    parsed.angle = (parsed.angle + 180) % 360;
  }

  return gradientToString(parsed);
};

const reversed = reverseGradient('linear-gradient(0deg, red, blue)');
// "linear-gradient(180deg, blue 0%, red 100%)"
```

### Adjust Gradient Lightness

```tsx
import { parseColor, colorToString } from 'remotion-bits';

const adjustGradientLightness = (
  gradient: string,
  amount: number
): string => {
  const parsed = parseGradient(gradient);

  parsed.stops = parsed.stops.map(stop => {
    const { l, c, h, alpha } = parseColor(stop.color);
    const newL = Math.max(0, Math.min(1, l + amount));
    return {
      color: colorToString(newL, c, h, alpha),
      position: stop.position
    };
  });

  return gradientToString(parsed);
};

// Make gradient 20% lighter
const lighter = adjustGradientLightness(
  'linear-gradient(red, blue)',
  0.2
);
```

## Advanced Features

### Gradient Type Morphing

The interpolation automatically handles transitions between different gradient types:

```tsx
// Linear to radial
interpolateGradient(
  'linear-gradient(90deg, red, blue)',
  'radial-gradient(circle, yellow, green)',
  0.5
);
// Smoothly morphs between the two types
```

### Shortest Angle Path

For linear and conic gradients, angle interpolation takes the shortest path:

```tsx
// 350째 to 10째 rotates 20째 clockwise, not 340째 counter-clockwise
interpolateGradient(
  'linear-gradient(350deg, red, blue)',
  'linear-gradient(10deg, red, blue)',
  0.5
);
// Results in ~0deg gradient
```

### Color Stop Alignment

When gradients have different numbers of stops, the interpolation automatically aligns them:

```tsx
// 2 stops to 4 stops
interpolateGradient(
  'linear-gradient(red, blue)',                    // 2 stops
  'linear-gradient(red, yellow, green, blue)',     // 4 stops
  0.5
);
// Automatically generates intermediate stops for smooth transition
```

## Gradient Patterns

### Rainbow Gradient

```tsx
const rainbowGradient = (angle: number = 90): string => {
  const colors = [
    '#ff0000', // Red
    '#ff7f00', // Orange
    '#ffff00', // Yellow
    '#00ff00', // Green
    '#0000ff', // Blue
    '#4b0082', // Indigo
    '#9400d3'  // Violet
  ];

  return createMultiStopGradient(colors, angle);
};
```

### Sunset Gradient

```tsx
const sunsetGradient = (): string => {
  return 'linear-gradient(180deg, ' +
    '#ff6b6b 0%, ' +    // Light red
    '#ee5a6f 25%, ' +   // Pink
    '#c06c84 50%, ' +   // Mauve
    '#6c5b7b 75%, ' +   // Purple
    '#355c7d 100%)';    // Dark blue
};
```

### Metallic Gradient

```tsx
const metallicGradient = (color: string): string => {
  const { l, c, h } = parseColor(color);

  const stops = [
    colorToString(Math.min(l + 0.2, 1), c * 0.8, h),  // Lighter
    colorToString(l, c, h),                           // Base
    colorToString(Math.max(l - 0.15, 0), c, h),       // Darker
    colorToString(l, c, h),                           // Base
    colorToString(Math.min(l + 0.2, 1), c * 0.8, h),  // Lighter
  ];

  return createMultiStopGradient(stops, 90);
};
```

## Performance

- **Efficient parsing**: Gradient strings are parsed once and cached
- **Optimized interpolation**: Color interpolation uses fast OKLch conversion
- **Minimal re-renders**: Gradient utilities are pure functions

## Validation

```tsx
const isValidGradient = (gradient: string): boolean => {
  try {
    parseGradient(gradient);
    return true;
  } catch {
    return false;
  }
};

if (isValidGradient('linear-gradient(red, blue)')) {
  // Use gradient
}
```

## Limitations

Current limitations:
- Repeating gradients not supported yet
- Positioned radial gradients use center by default
- Color hints (midpoints) are approximated

## See Also

- [BackgroundTransition](/docs/components/background-transition) - Uses these utilities
- [Color Utilities](/docs/utilities/colors) - Color manipulation functions
- [Interpolate](/docs/utilities/interpolate) - Core interpolation function
- [Background Examples](/docs/examples/background-effects) - Gradient examples
